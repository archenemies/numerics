FHE 04 Apr 2025

Notes on vec-wrap.R

Originally we wanted to have a special object that keeps track of when
we want to recycle the last index, so that we don't have to replicate
the value object. But then we realized that this wouldn't work for
nested uses of vec_wrap, which may be important, so we removed this
facility. A better design would be to have R keep track of objects
created through replication of a vector, and to optimize storage by
keeping only the original vector and using a special subscripting
operation (with modular arithmetic?). Actually I think R should have
an internal vector storage backend that represents an array with
certain dimensions "recycled" so that only one copy of each of these
needs to be stored. That would be a more appropriate place for such an
optimization since it can be applied to all vectors.

